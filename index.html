<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Flarego Inventory</title>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
Â  Â  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --primary: #6366f1;
Â  Â  Â  Â  Â  Â  --primary-hover: #4f46e5;
Â  Â  Â  Â  Â  Â  --success: #10b981;
Â  Â  Â  Â  Â  Â  --danger: #ef4444;
Â  Â  Â  Â  Â  Â  --warning: #f59e0b;
Â  Â  Â  Â  Â  Â  --dark: #0f172a;
Â  Â  Â  Â  Â  Â  --bg: #f8fafc;
Â  Â  Â  Â  Â  Â  --card-bg: #ffffff;
Â  Â  Â  Â  Â  Â  --text-main: #1e293b;
Â  Â  Â  Â  Â  Â  --text-muted: #64748b;
Â  Â  Â  Â  Â  Â  --border: #e2e8f0;
Â  Â  Â  Â  }

Â  Â  Â  Â  body { 
Â  Â  Â  Â  Â  Â  font-family: 'Plus Jakarta Sans', sans-serif; 
Â  Â  Â  Â  Â  Â  margin: 0; 
Â  Â  Â  Â  Â  Â  background: var(--bg); 
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  Â  Â  line-height: 1.6;
Â  Â  Â  Â  }

Â  Â  Â  Â  .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }

Â  Â  Â  Â  .user-section {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  padding: 5px 12px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  transition: background 0.2s;
Â  Â  Â  Â  }

Â  Â  Â  Â  .user-section:hover { background: #f1f5f9; }

Â  Â  Â  Â  .avatar {
Â  Â  Â  Â  Â  Â  width: 42px;
Â  Â  Â  Â  Â  Â  height: 42px;
Â  Â  Â  Â  Â  Â  border-radius: 12px; 
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  border: 2px solid white;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
Â  Â  Â  Â  Â  Â  background: #eee;
Â  Â  Â  Â  }

Â  Â  Â  Â  .user-meta { text-align: right; }
Â  Â  Â  Â  .user-meta .name { display: block; font-weight: 700; font-size: 0.9rem; color: var(--dark); }
Â  Â  Â  Â  .user-meta .role { 
Â  Â  Â  Â  Â  Â  display: block; 
Â  Â  Â  Â  Â  Â  font-size: 0.7rem; 
Â  Â  Â  Â  Â  Â  color: var(--text-muted); 
Â  Â  Â  Â  Â  Â  font-weight: 600; 
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  letter-spacing: 0.5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .profile-dropdown {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 100%;
Â  Â  Â  Â  Â  Â  right: 0;
Â  Â  Â  Â  Â  Â  width: 200px;
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
Â  Â  Â  Â  Â  Â  border: 1px solid #e2e8f0;
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  z-index: 100;
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }

Â  Â  Â  Â  .profile-dropdown a {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  padding: 12px 16px;
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }

Â  Â  Â  Â  .profile-dropdown a:hover { background: #f8fafc; color: var(--primary); }

Â  Â  Â  Â  .alert-banner {
Â  Â  Â  Â  Â  Â  background: #fef2f2;
Â  Â  Â  Â  Â  Â  border: 1px solid #fee2e2;
Â  Â  Â  Â  Â  Â  color: var(--danger);
Â  Â  Â  Â  Â  Â  padding: 16px 24px;
Â  Â  Â  Â  Â  Â  border-radius: 16px;
Â  Â  Â  Â  Â  Â  margin-bottom: 24px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 12px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  Â  Â  Â  animation: slideDown 0.4s ease-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes slideDown {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: translateY(-10px); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: translateY(0); }
Â  Â  Â  Â  }

Â  Â  Â  Â  .top-bar {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 40px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .brand { 
Â  Â  Â  Â  Â  Â  display: flex; 
Â  Â  Â  Â  Â  Â  align-items: center; 
Â  Â  Â  Â  Â  Â  gap: 18px; 
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .logo-container {
Â  Â  Â  Â  Â  Â  width: 62px;
Â  Â  Â  Â  Â  Â  height: 62px;
Â  Â  Â  Â  Â  Â  background: var(--primary);
Â  Â  Â  Â  Â  Â  border-radius: 18px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  box-shadow: 0 12px 24px -6px rgba(99, 102, 241, 0.4);
Â  Â  Â  Â  }

Â  Â  Â  Â  .brand-text {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  font-weight: 800;
Â  Â  Â  Â  Â  Â  font-size: 2.4rem;
Â  Â  Â  Â  Â  Â  color: var(--dark);
Â  Â  Â  Â  Â  Â  letter-spacing: -1.8px;
Â  Â  Â  Â  Â  Â  line-height: 1;
Â  Â  Â  Â  }

Â  Â  Â  Â  .brand-text span { color: var(--primary); }

Â  Â  Â  Â  .stats-grid { 
Â  Â  Â  Â  Â  Â  display: grid; 
Â  Â  Â  Â  Â  Â  grid-template-columns: 1fr 0.8fr 1fr 1fr 1fr; 
Â  Â  Â  Â  Â  Â  gap: 20px; 
Â  Â  Â  Â  Â  Â  margin-bottom: 40px; 
Â  Â  Â  Â  }

Â  Â  Â  Â  .stat-card { 
Â  Â  Â  Â  Â  Â  background: var(--card-bg); 
Â  Â  Â  Â  Â  Â  padding: 20px; 
Â  Â  Â  Â  Â  Â  border-radius: 20px; 
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
Â  Â  Â  Â  Â  Â  border: 1px solid #e2e8f0;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stat-card h4 { margin: 0; font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; }
Â  Â  Â  Â  .stat-card .value { font-size: 1.3rem; font-weight: 800; margin-top: 8px; color: var(--dark); }

Â  Â  Â  Â  .main-layout {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: 1fr 300px;
Â  Â  Â  Â  Â  Â  gap: 30px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn {
Â  Â  Â  Â  Â  Â  padding: 12px 20px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all 0.2s ease;
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  display: inline-flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 14px 0 rgba(99, 102, 241, 0.39); }
Â  Â  Â  Â  .btn-primary:hover { background: var(--primary-hover); transform: translateY(-2px); }

Â  Â  Â  Â  .btn-outline { border: 2px solid #e2e8f0; color: var(--text-main); background: white; }
Â  Â  Â  Â  .btn-outline:hover { background: #f8fafc; border-color: #cbd5e1; }

Â  Â  Â  Â  .btn-sell {
Â  Â  Â  Â  Â  Â  background: #ecfdf5;
Â  Â  Â  Â  Â  Â  color: var(--success);
Â  Â  Â  Â  Â  Â  border: 1px solid #d1fae5;
Â  Â  Â  Â  Â  Â  padding: 6px 12px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  font-weight: 800;
Â  Â  Â  Â  Â  Â  font-size: 0.7rem;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-sell:hover:not(:disabled) { background: var(--success); color: white; }
Â  Â  Â  Â  .btn-sell:disabled { opacity: 0.5; cursor: not-allowed; filter: grayscale(1); }

Â  Â  Â  Â  .card { 
Â  Â  Â  Â  Â  Â  background: var(--card-bg); 
Â  Â  Â  Â  Â  Â  border-radius: 24px; 
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05); 
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  border: 1px solid #e2e8f0;
Â  Â  Â  Â  }

Â  Â  Â  Â  .inventory-header {
Â  Â  Â  Â  Â  Â  padding: 24px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #f1f5f9;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Sorting Header Styles */
Â  Â  Â  Â  .sorting-row {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: 2fr 1fr 1fr 200px;
Â  Â  Â  Â  Â  Â  padding: 10px 24px;
Â  Â  Â  Â  Â  Â  background: #fcfdfe;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #f1f5f9;
Â  Â  Â  Â  Â  Â  font-size: 0.7rem;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  font-weight: 800;
Â  Â  Â  Â  Â  Â  color: var(--text-muted);
Â  Â  Â  Â  Â  Â  letter-spacing: 0.5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .sort-btn {
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  display: inline-flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 4px;
Â  Â  Â  Â  Â  Â  transition: color 0.2s;
Â  Â  Â  Â  }

Â  Â  Â  Â  .sort-btn:hover { color: var(--primary); }

Â  Â  Â  Â  .product-row {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: 2fr 1fr 1fr 200px; 
Â  Â  Â  Â  Â  Â  padding: 16px 24px;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #f1f5f9;
Â  Â  Â  Â  Â  Â  transition: all 0.2s ease;
Â  Â  Â  Â  }

Â  Â  Â  Â  .product-row:hover { 
Â  Â  Â  Â  Â  Â  background: #f8fafc; 
Â  Â  Â  Â  Â  Â  border-left: 4px solid var(--primary);
Â  Â  Â  Â  }

Â  Â  Â  Â  .product-actions {
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transition: opacity 0.2s ease;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 12px;
Â  Â  Â  Â  Â  Â  justify-content: flex-end;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .product-row:hover .product-actions {
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  }

Â  Â  Â  Â  .status-badge {
Â  Â  Â  Â  Â  Â  padding: 6px 12px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  }

Â  Â  Â  Â  .status-ok { background: #ecfdf5; color: var(--success); }
Â  Â  Â  Â  .status-low { background: #fff7ed; color: var(--warning); }
Â  Â  Â  Â  .status-critical { background: #fef2f2; color: var(--danger); }

Â  Â  Â  Â  .form-section { padding: 30px; background: #f8fafc; border-bottom: 1px solid #e2e8f0; }
Â  Â  Â  Â  input { 
Â  Â  Â  Â  Â  Â  width: 100%; padding: 12px 16px; border-radius: 12px; border: 1px solid #cbd5e1; 
Â  Â  Â  Â  Â  Â  box-sizing: border-box; font-family: inherit; font-size: 0.95rem;
Â  Â  Â  Â  }
Â  Â  Â  Â  label { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 8px; color: var(--text-muted); }

Â  Â  Â  Â  .btn-view-all {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  padding: 12px;
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  color: var(--primary);
Â  Â  Â  Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  background: #f8fafc;
Â  Â  Â  Â  Â  Â  border-top: 1px solid #f1f5f9;
Â  Â  Â  Â  Â  Â  transition: background 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-view-all:hover {
Â  Â  Â  Â  Â  Â  background: #f1f5f9;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Pagination Footer Updated */
Â  Â  Â  Â  .pagination-footer {
Â  Â  Â  Â  Â  Â  padding: 16px 24px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  background: #fff;
Â  Â  Â  Â  Â  Â  border-top: 1px solid #f1f5f9;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .jump-container {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  color: var(--text-muted);
Â  Â  Â  Â  }

Â  Â  Â  Â  .jump-input {
Â  Â  Â  Â  Â  Â  width: 50px;
Â  Â  Â  Â  Â  Â  padding: 6px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--border);
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-pagination {
Â  Â  Â  Â  Â  Â  padding: 8px 16px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--border);
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all 0.2s;
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-pagination:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background: var(--bg);
Â  Â  Â  Â  Â  Â  border-color: var(--primary);
Â  Â  Â  Â  Â  Â  color: var(--primary);
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-pagination:disabled {
Â  Â  Â  Â  Â  Â  opacity: 0.4;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  
Â  Â  Â  Â  {{$lowStockItems := ""}}
Â  Â  Â  Â  {{range .Products}}{{if le .NumericStock 5}}{{$lowStockItems = print $lowStockItems .Name ", "}}{{end}}{{end}}
Â  Â  Â  Â  
Â  Â  Â  Â  {{if ne $lowStockItems ""}}
Â  Â  Â  Â  <div class="alert-banner">
Â  Â  Â  Â  Â  Â  <span>âš ï¸</span>
Â  Â  Â  Â  Â  Â  <span>Low Stock Alert: {{ $lowStockItems }} need restocking.</span>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  {{end}}

Â  Â  Â  Â  <div class="top-bar">
Â  Â  Â  Â  Â  Â  <div class="brand">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="logo-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg width="32" height="32" viewBox="0 0 200 300" fill="none" xmlns="http://www.w3.org/2000/svg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path d="M95.5 10C95.5 10 50 60 50 145C50 215 95 255 110 255C125 255 170 215 170 145C170 75 120 10 120 10C120 10 150 50 150 125C150 185 115 220 115 220C115 220 80 185 80 125C80 65 110 10 110 10" fill="white"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="brand-text">Flare<span>go</span></h1>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: 24px; align-items: center;">
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: 12px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {{ if eq .User.Role "admin" }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="/export" class="btn btn-outline">ğŸ“¥ Export CSV</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="toggleForm()" class="btn btn-primary">â• New Product</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {{ end }}
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="user-section" onclick="toggleProfileDropdown(event)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="user-meta">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="name">{{.User.DisplayName}}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="role">{{ if eq .User.Role "admin" }}Administrator{{ else }}Staff Member{{ end }}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="{{if .User.ProfilePic}}{{.User.ProfilePic}}{{else}}https://ui-avatars.com/api/?name={{.User.DisplayName}}&background=6366f1&color=fff{{end}}" 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="avatar" 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â alt="Profile" 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â onerror="this.src='https://ui-avatars.com/api/?name={{.User.DisplayName}}&background=6366f1&color=fff'">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="profileDropdown" class="profile-dropdown">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="/settings" target="_blank">âš™ï¸ Profile Settings</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {{ if eq .User.Role "admin" }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="/users">ğŸ‘¥ User Management</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="/audit">ğŸ“œ Audit Trail</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {{ end }}

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <hr style="border: 0; border-top: 1px solid #f1f5f9; margin: 0;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="/logout" style="color: var(--danger);">ğŸšª Logout</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="stats-grid">
Â  Â  Â  Â  Â  Â  <div class="stat-card" style="display: flex; align-items: center; gap: 15px;">
Â  Â  Â  Â  Â  Â  Â  Â  <div style="width: 50px; height: 50px;"><canvas id="healthChart"></canvas></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>Health</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="value">{{.HealthScore}}%</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="stat-card">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>Total Units</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="value">{{.TotalStockItems}}</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="stat-card" style="border-bottom: 4px solid var(--primary);">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>Sales Today</h4> <div class="value">{{.TotalSales}}</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="stat-card">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>Valuation</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="value">â‚±{{.TotalValue}}</div> 
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="stat-card">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>Est. Profit</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="value" style="color: var(--success);">â‚±{{.TotalProfit}}</div> 
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="main-layout">
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  {{ if eq .User.Role "admin" }}
Â  Â  Â  Â  Â  Â  Â  Â  <div id="form-content" class="form-section" style="display: {{if .IsEditing}}block{{else}}none{{end}};">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="margin-top:0">{{if .EditItem}}Edit Product: {{.EditItem.Name}}{{else}}Add New Product{{end}}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form action="/add" method="POST">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="hidden" name="id" value="{{if .EditItem}}{{.EditItem.ID}}{{end}}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Product Name</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="name" value="{{if .EditItem}}{{.EditItem.Name}}{{end}}" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Price (Sell) â‚±</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.01" name="price" value="{{if .EditItem}}{{.EditItem.Price}}{{end}}" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Cost (Buy) â‚±</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.01" name="cost_price" value="{{if .EditItem}}{{.EditItem.CostPrice}}{{end}}" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display: grid; grid-template-columns: 1fr 3fr; gap: 15px; margin-top: 15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Stock</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" name="stock" value="{{if .EditItem}}{{.EditItem.Stock}}{{end}}" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Description</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" name="desc" value="{{if .EditItem}}{{.EditItem.Desc}}{{end}}" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: 10px; margin-top: 20px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="btn btn-primary">{{if .EditItem}}Update Product{{else}}Save Product{{end}}</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="/" class="btn btn-outline">Cancel</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  {{ end }}

Â  Â  Â  Â  Â  Â  Â  Â  <div class="inventory-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="margin:0">Live Inventory</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="posSearch" placeholder="Search products..." style="width: 250px;">
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="sorting-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sort-btn" onclick="toggleSort('name')">Product Name <span id="sort-name">â†•</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sort-btn" onclick="toggleSort('stock')">Stock <span id="sort-stock">â†•</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sort-btn" onclick="toggleSort('price')">Price <span id="sort-price">â†•</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="text-align: right;">Actions</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="inventory-list"></div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="pagination-footer">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-pagination" id="prevBtn" onclick="changePage(-1)">â† Previous</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="pageIndicator" style="font-size: 0.8rem; font-weight: 700; color: var(--text-muted); margin: 0 10px;">Page 1 of 1</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-pagination" id="nextBtn" onclick="changePage(1)">Next â†’</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="jump-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Jump to Page: 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="jumpPageInput" class="jump-input" min="1" onkeypress="handleJump(event)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="card" style="display: flex; flex-direction: column;">
Â  Â  Â  Â  Â  Â  Â  Â  <div style="padding: 24px 24px 12px 24px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="margin-top: 0; font-size: 1rem;">Recent Activity</h3>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="padding: 0 24px; flex-grow: 1;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {{range .Logs}}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="padding: 12px 0; border-bottom: 1px solid #f1f5f9; font-size: 0.85rem;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-weight: 700; color: {{if eq .Action "Sale"}}var(--success){{else}}var(--primary){{end}}; font-size: 0.7rem; text-transform: uppercase;">{{.Action}}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-weight: 600;">{{.ProductName}}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: 0.7rem; color: var(--text-muted);">{{.CreatedAt.Format "Jan 02, 15:04"}}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {{else}}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: 0.8rem; color: var(--text-muted);">No recent logs.</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {{end}}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  {{ if eq .User.Role "admin" }}
Â  Â  Â  Â  Â  Â  Â  Â  <a href="/audit" class="btn-view-all">VIEW ALL HISTORY â†’</a>
Â  Â  Â  Â  Â  Â  Â  Â  {{ end }}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <p style="text-align:center; font-size: 0.8rem; color: var(--text-muted); margin-top: 40px;">
Â  Â  Â  Â  Â  Â  <b>Flarego ERP v3.0</b> â€¢ POS Enabled â€¢ Role-Based Access
Â  Â  Â  Â  </p>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  let currentPage = 1;
Â  Â  Â  Â  const itemsPerPage = 8;
Â  Â  Â  Â  let filteredProducts = [];
Â  Â  Â  Â  let sortState = { column: null, direction: 'asc' };

Â  Â  Â  Â  const allProducts = [
Â  Â  Â  Â  Â  Â  {{range .Products}}
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  id: "{{.ID}}",
Â  Â  Â  Â  Â  Â  Â  Â  name: "{{.Name}}",
Â  Â  Â  Â  Â  Â  Â  Â  desc: "{{.Desc}}",
Â  Â  Â  Â  Â  Â  Â  Â  stock: {{.NumericStock}},
Â  Â  Â  Â  Â  Â  Â  Â  displayStock: "{{.Stock}}",
Â  Â  Â  Â  Â  Â  Â  Â  price: parseFloat("{{.Price}}".replace(/,/g, ''))
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {{end}}
Â  Â  Â  Â  ];

Â  Â  Â  Â  filteredProducts = [...allProducts];

Â  Â  Â  Â  function renderInventory() {
Â  Â  Â  Â  Â  Â  const list = document.getElementById('inventory-list');
Â  Â  Â  Â  Â  Â  const startIndex = (currentPage - 1) * itemsPerPage;
Â  Â  Â  Â  Â  Â  const endIndex = startIndex + itemsPerPage;
Â  Â  Â  Â  Â  Â  const pageItems = filteredProducts.slice(startIndex, endIndex);

Â  Â  Â  Â  Â  Â  if (pageItems.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  list.innerHTML = `<div style="padding: 60px; text-align: center; color: var(--text-muted);">No products found.</div>`;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  list.innerHTML = pageItems.map(p => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="product-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-weight: 700; color: var(--dark);">${p.name}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: 0.8rem; color: var(--text-muted);">${p.desc}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="status-badge ${p.stock <= 0 ? 'status-critical' : p.stock <= 5 ? 'status-low' : 'status-ok'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${p.displayStock} Units
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-weight: 800;">â‚±${p.price.toLocaleString(undefined, {minimumFractionDigits: 2})}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="product-actions">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form action="/sell" method="POST" style="margin:0;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="hidden" name="id" value="${p.id}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="btn-sell" ${p.stock <= 0 ? 'disabled title="Out of Stock"' : ''}>ğŸ’° SELL</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {{ if eq $.User.Role "admin" }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="/?edit=${p.id}" style="color: var(--primary); text-decoration: none; font-size: 0.8rem; font-weight: 700;">Edit</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="/delete?id=${p.id}" onclick="return confirm('Delete this product?')" style="color: var(--danger); text-decoration: none; font-size: 0.8rem; font-weight: 700;">Del</a>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {{ end }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const totalPages = Math.ceil(filteredProducts.length / itemsPerPage) || 1;
Â  Â  Â  Â  Â  Â  document.getElementById('pageIndicator').innerText = `Page ${currentPage} of ${totalPages}`;
Â  Â  Â  Â  Â  Â  document.getElementById('prevBtn').disabled = currentPage === 1;
Â  Â  Â  Â  Â  Â  document.getElementById('nextBtn').disabled = currentPage === totalPages;
Â  Â  Â  Â  Â  Â  document.getElementById('jumpPageInput').max = totalPages;
Â  Â  Â  Â  }

Â  Â  Â  Â  function toggleSort(col) {
Â  Â  Â  Â  Â  Â  if (sortState.column === col) {
Â  Â  Â  Â  Â  Â  Â  Â  sortState.direction = sortState.direction === 'asc' ? 'desc' : 'asc';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  sortState.column = col;
Â  Â  Â  Â  Â  Â  Â  Â  sortState.direction = 'asc';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Update UI icons
Â  Â  Â  Â  Â  Â  ['name', 'stock', 'price'].forEach(c => {
Â  Â  Â  Â  Â  Â  Â  Â  const icon = document.getElementById(`sort-${c}`);
Â  Â  Â  Â  Â  Â  Â  Â  if (c === col) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  icon.innerText = sortState.direction === 'asc' ? 'â†‘' : 'â†“';
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  icon.innerText = 'â†•';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  filteredProducts.sort((a, b) => {
Â  Â  Â  Â  Â  Â  Â  Â  let valA = a[col];
Â  Â  Â  Â  Â  Â  Â  Â  let valB = b[col];
Â  Â  Â  Â  Â  Â  Â  Â  if (typeof valA === 'string') valA = valA.toLowerCase();
Â  Â  Â  Â  Â  Â  Â  Â  if (typeof valB === 'string') valB = valB.toLowerCase();
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  if (valA < valB) return sortState.direction === 'asc' ? -1 : 1;
Â  Â  Â  Â  Â  Â  Â  Â  if (valA > valB) return sortState.direction === 'asc' ? 1 : -1;
Â  Â  Â  Â  Â  Â  Â  Â  return 0;
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  currentPage = 1;
Â  Â  Â  Â  Â  Â  renderInventory();
Â  Â  Â  Â  }

Â  Â  Â  Â  function handleJump(e) {
Â  Â  Â  Â  Â  Â  if (e.key === 'Enter') {
Â  Â  Â  Â  Â  Â  Â  Â  const pageNum = parseInt(e.target.value);
Â  Â  Â  Â  Â  Â  Â  Â  const totalPages = Math.ceil(filteredProducts.length / itemsPerPage) || 1;
Â  Â  Â  Â  Â  Â  Â  Â  if (pageNum >= 1 && pageNum <= totalPages) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentPage = pageNum;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderInventory();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.target.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("Invalid Page Number");
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function changePage(dir) {
Â  Â  Â  Â  Â  Â  currentPage += dir;
Â  Â  Â  Â  Â  Â  renderInventory();
Â  Â  Â  Â  Â  Â  window.scrollTo({ top: 0, behavior: 'smooth' });
Â  Â  Â  Â  }

Â  Â  Â  Â  document.getElementById('posSearch').addEventListener('input', function(e) {
Â  Â  Â  Â  Â  Â  const term = e.target.value.toLowerCase();
Â  Â  Â  Â  Â  Â  filteredProducts = allProducts.filter(p => 
Â  Â  Â  Â  Â  Â  Â  Â  p.name.toLowerCase().includes(term) || p.desc.toLowerCase().includes(term)
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  currentPage = 1; 
Â  Â  Â  Â  Â  Â  renderInventory();
Â  Â  Â  Â  });

Â  Â  Â  Â  function toggleForm() {
Â  Â  Â  Â  Â  Â  const f = document.getElementById('form-content');
Â  Â  Â  Â  Â  Â  if (f) f.style.display = f.style.display === 'none' ? 'block' : 'none';
Â  Â  Â  Â  }

Â  Â  Â  Â  function toggleProfileDropdown(e) {
Â  Â  Â  Â  Â  Â  e.stopPropagation();
Â  Â  Â  Â  Â  Â  const d = document.getElementById('profileDropdown');
Â  Â  Â  Â  Â  Â  d.style.display = d.style.display === 'block' ? 'none' : 'block';
Â  Â  Â  Â  }

Â  Â  Â  Â  window.onclick = function() {
Â  Â  Â  Â  Â  Â  const dropdown = document.getElementById('profileDropdown');
Â  Â  Â  Â  Â  Â  if (dropdown) dropdown.style.display = 'none';
Â  Â  Â  Â  }

Â  Â  Â  Â  const healthScore = Number("{{.HealthScore}}") || 0;
Â  Â  Â  Â  let chartColor = '#6366f1';
Â  Â  Â  Â  if (healthScore < 30) chartColor = '#ef4444';
Â  Â  Â  Â  else if (healthScore < 70) chartColor = '#f59e0b';

Â  Â  Â  Â  const ctx = document.getElementById('healthChart').getContext('2d');
Â  Â  Â  Â  new Chart(ctx, {
Â  Â  Â  Â  Â  Â  type: 'doughnut',
Â  Â  Â  Â  Â  Â  data: {
Â  Â  Â  Â  Â  Â  Â  Â  datasets: [{
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: [healthScore, 100 - healthScore],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  backgroundColor: [chartColor, '#f1f5f9'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderWidth: 0,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderRadius: 4
Â  Â  Â  Â  Â  Â  Â  Â  }]
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  options: { cutout: '75%', plugins: { legend: { display: false }, tooltip: { enabled: false } } }
Â  Â  Â  Â  });

Â  Â  Â  Â  renderInventory();
Â  Â  </script>
</body>
</html>